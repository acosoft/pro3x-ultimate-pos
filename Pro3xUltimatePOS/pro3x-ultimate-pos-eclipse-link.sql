CREATE TABLE kalkulacija_stavka_kartica (sid BIGINT AUTO_INCREMENT NOT NULL, izlazna_cijena DOUBLE, ulaz_kolicina DOUBLE, opis VARCHAR(255), datum DATETIME, izlaz_kolicina DOUBLE, ulazna_cijena DOUBLE, STAVKA_kljuc VARCHAR(255), ROBA_KLJUC VARCHAR(255), PRIMARY KEY (sid))
CREATE TABLE korisnik (kljuc VARCHAR(255) NOT NULL, maticni_broj VARCHAR(255), adresa VARCHAR(255), naziv VARCHAR(255), email VARCHAR(255), lokacija VARCHAR(255), mobitel VARCHAR(255), telefon VARCHAR(255), PRIMARY KEY (kljuc))
CREATE TABLE kartica_stavke_racuna (SID BIGINT AUTO_INCREMENT NOT NULL, IZLAZNA_CIJENA DOUBLE, IZLAZ_KOLICINA DOUBLE, ULAZ_KOLICINA DOUBLE, OPIS VARCHAR(255), DATUM DATETIME, ULAZNA_CIJENA DOUBLE, ROBA_KLJUC VARCHAR(255), PRIMARY KEY (SID))
CREATE TABLE STAVKE (KLJUC BIGINT AUTO_INCREMENT NOT NULL, tip VARCHAR(31), UKUPNO DOUBLE NOT NULL, MJERA VARCHAR(255), IZNOS DOUBLE, POPUST DOUBLE, KOLICINA DOUBLE NOT NULL, MALOPRODAJNACIJENA DOUBLE, ROBA VARCHAR(255) NOT NULL, CIJENA DOUBLE NOT NULL, ROBA_KLJUC VARCHAR(255) NOT NULL, grupa VARCHAR(255), RACUN_KLJUC VARCHAR(255), PRIMARY KEY (KLJUC))
CREATE TABLE OPERATER (ID BIGINT NOT NULL, OIB VARCHAR(255), NAME VARCHAR(255), PASSWORD VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE DOBAVLJAC (KLJUC INTEGER AUTO_INCREMENT NOT NULL, ZIRO VARCHAR(255), MATICNI_BROJ VARCHAR(255), ADRESA VARCHAR(255), NAZIV VARCHAR(255), LOKACIJA VARCHAR(255), PRIMARY KEY (KLJUC))
CREATE TABLE roba_kartica_normativa (sid BIGINT AUTO_INCREMENT NOT NULL, izlazna_cijena DOUBLE, ulaz_kolicina DOUBLE, opis VARCHAR(255), datum DATETIME, izlaz_kolicina DOUBLE, ulazna_cijena DOUBLE, ROBA_KLJUC VARCHAR(255), normativ_id VARCHAR(255), PRIMARY KEY (sid))
CREATE TABLE kalkulacija_stavka (kljuc VARCHAR(255) NOT NULL, UKUPNO DOUBLE, mjerna_jedinica VARCHAR(255), IZNOS DOUBLE, porezna_stopa DOUBLE, fakturna_sa_porezom DOUBLE, iznos_poreza DOUBLE, zavisni_troskovi DOUBLE, KOLICINA DOUBLE, MARZA DOUBLE, iznos_rabata DOUBLE, cijena_sa_porezom DOUBLE, RABAT DOUBLE, fakturna_vrijednost_bez_poreza DOUBLE, OSNOVICA DOUBLE, CIJENA DOUBLE, cijena_bez_poreza DOUBLE, iznos_marze DOUBLE, ARTIKAL_KLJUC VARCHAR(255), KALKULACIJA_kljuc VARCHAR(255), PRIMARY KEY (kljuc))
CREATE TABLE TEMPLATE (oznaka VARCHAR(255) NOT NULL, putanja VARCHAR(1000), naziv VARCHAR(255), OPIS VARCHAR(1000), nacin_placanja VARCHAR(255), prioritet INTEGER, format TEXT(64000), rok_placanja INTEGER, tip VARCHAR(255), PRIMARY KEY (oznaka))
CREATE TABLE porezna_stopa (kljuc VARCHAR(255) NOT NULL, iznos DOUBLE, opis VARCHAR(255), pocetak DATETIME, kraj DATETIME, PRIMARY KEY (kljuc))
CREATE TABLE racun_naplata (ID VARCHAR(255) NOT NULL, IZNOS DOUBLE NOT NULL, DATUMPLACANJA DATE, DATUMDOSPIJECA DATETIME NOT NULL, RACUN_KLJUC VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE ROBA_KARTICA_NORMATIVA (SID BIGINT AUTO_INCREMENT NOT NULL, IZLAZNA_CIJENA DOUBLE, IZLAZ_KOLICINA DOUBLE, ULAZ_KOLICINA DOUBLE, OPIS VARCHAR(255), DATUM DATETIME, ULAZNA_CIJENA DOUBLE, ROBA_KLJUC VARCHAR(255), PRIMARY KEY (SID))
CREATE TABLE kalkulacija (kljuc VARCHAR(255) NOT NULL, IZRADIO VARCHAR(255), datum_placenja DATETIME, datum_dospijeca DATETIME, oznaka_dokumenta VARCHAR(255), datum_dokumenta DATETIME, oznaka_kalkulacije VARCHAR(255), datum_izrade DATETIME, DOBAVLJAC_KLJUC INTEGER, PRIMARY KEY (kljuc))
CREATE TABLE KARTICA_STAVKE_RACUNA (sid BIGINT AUTO_INCREMENT NOT NULL, izlazna_cijena DOUBLE, ulaz_kolicina DOUBLE, opis VARCHAR(255), datum DATETIME, izlaz_kolicina DOUBLE, ulazna_cijena DOUBLE, stavka_kljuc BIGINT, ROBA_KLJUC VARCHAR(255), PRIMARY KEY (sid))
CREATE TABLE template_description (ID VARCHAR(255) NOT NULL, OPIS VARCHAR(255), TEMPLATE_oznaka VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE KALKULACIJA_STAVKA_KARTICA (SID BIGINT AUTO_INCREMENT NOT NULL, IZLAZNA_CIJENA DOUBLE, IZLAZ_KOLICINA DOUBLE, ULAZ_KOLICINA DOUBLE, OPIS VARCHAR(255), DATUM DATETIME, ULAZNA_CIJENA DOUBLE, ROBA_KLJUC VARCHAR(255), PRIMARY KEY (SID))
CREATE TABLE artikal_normativi (ID VARCHAR(255) NOT NULL, KOLICINA DOUBLE, ARTIKAL_KLJUC VARCHAR(255), NORMATIV_KLJUC VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE roba (KLJUC VARCHAR(255) NOT NULL, MJERA VARCHAR(255), NAZIV VARCHAR(255), povratna TINYINT(1) default 0, NABAVNA_CIJENA DOUBLE, sifra VARCHAR(255), CIJENA DOUBLE, deklaracija VARCHAR(4000), pdv VARCHAR(255), pot VARCHAR(255), grupa VARCHAR(255), pdv_nabava VARCHAR(255), PRIMARY KEY (KLJUC))
CREATE TABLE grupe_artikala (kljuc VARCHAR(255) NOT NULL, oznaka VARCHAR(255), PRIMARY KEY (kljuc))
CREATE TABLE stavke_normativi (ID VARCHAR(255) NOT NULL, MJERA VARCHAR(255), POREZNASTOPA DOUBLE, MALOPRODAJNACIJENA DOUBLE, POPUST DOUBLE, OPIS VARCHAR(255), KOLICINA DOUBLE, STAVKA_KLJUC BIGINT, ARTIKAL_KLJUC VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE racun_porezne_stavke (OZNAKA BIGINT NOT NULL, tip VARCHAR(31), naziv VARCHAR(255), iznos DECIMAL(20,6), osnovica DECIMAL(20,6), stopa DECIMAL(3,2), racun VARCHAR(255), PRIMARY KEY (OZNAKA))
CREATE TABLE roba_kartica (sid BIGINT AUTO_INCREMENT NOT NULL, izlazna_cijena DOUBLE, ulaz_kolicina DOUBLE, opis VARCHAR(255), datum DATETIME, izlaz_kolicina DOUBLE, ulazna_cijena DOUBLE, ROBA_KLJUC VARCHAR(255), PRIMARY KEY (sid))
CREATE TABLE roba_promjena_cijene (ID VARCHAR(255) NOT NULL, MALOPRODAJNACIJENA DOUBLE, POCETAK DATETIME, ARTIKAL_KLJUC VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE RACUN (KLJUC VARCHAR(255) NOT NULL, tip VARCHAR(31), MATICNI_BROJ VARCHAR(255), verzija INTEGER, jir VARCHAR(255), POREZ DOUBLE, NAZIV VARCHAR(255), STORNIRAN DATETIME, KORISNIK_KLJUC VARCHAR(255), IZDAN DATETIME, zki VARCHAR(255), fiskalni_uredaj VARCHAR(255), PLACEN DATETIME, UKUPNO DOUBLE, ADRESA VARCHAR(255), OZNAKA VARCHAR(255), fiskalna_lokacija VARCHAR(255), TELEFON VARCHAR(255), VALUTA DATETIME, NAPOMENA VARCHAR(4000), UPLATA VARCHAR(255), LOKACIJA VARCHAR(255), MOBITEL VARCHAR(255), OTPREMNICA VARCHAR(255), zaglavlje VARCHAR(2000), operater BIGINT, template VARCHAR(255), PRIMARY KEY (KLJUC))
ALTER TABLE kalkulacija_stavka_kartica ADD CONSTRAINT FK_kalkulacija_stavka_kartica_STAVKA_kljuc FOREIGN KEY (STAVKA_kljuc) REFERENCES kalkulacija_stavka (kljuc)
ALTER TABLE kalkulacija_stavka_kartica ADD CONSTRAINT FK_kalkulacija_stavka_kartica_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE kartica_stavke_racuna ADD CONSTRAINT FK_kartica_stavke_racuna_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE STAVKE ADD CONSTRAINT FK_STAVKE_RACUN_KLJUC FOREIGN KEY (RACUN_KLJUC) REFERENCES RACUN (KLJUC)
ALTER TABLE STAVKE ADD CONSTRAINT FK_STAVKE_grupa FOREIGN KEY (grupa) REFERENCES grupe_artikala (kljuc)
ALTER TABLE STAVKE ADD CONSTRAINT FK_STAVKE_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE roba_kartica_normativa ADD CONSTRAINT FK_roba_kartica_normativa_normativ_id FOREIGN KEY (normativ_id) REFERENCES stavke_normativi (ID)
ALTER TABLE roba_kartica_normativa ADD CONSTRAINT FK_roba_kartica_normativa_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE kalkulacija_stavka ADD CONSTRAINT FK_kalkulacija_stavka_KALKULACIJA_kljuc FOREIGN KEY (KALKULACIJA_kljuc) REFERENCES kalkulacija (kljuc)
ALTER TABLE kalkulacija_stavka ADD CONSTRAINT FK_kalkulacija_stavka_ARTIKAL_KLJUC FOREIGN KEY (ARTIKAL_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE racun_naplata ADD CONSTRAINT FK_racun_naplata_RACUN_KLJUC FOREIGN KEY (RACUN_KLJUC) REFERENCES RACUN (KLJUC)
ALTER TABLE ROBA_KARTICA_NORMATIVA ADD CONSTRAINT FK_ROBA_KARTICA_NORMATIVA_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE kalkulacija ADD CONSTRAINT FK_kalkulacija_DOBAVLJAC_KLJUC FOREIGN KEY (DOBAVLJAC_KLJUC) REFERENCES DOBAVLJAC (KLJUC)
ALTER TABLE KARTICA_STAVKE_RACUNA ADD CONSTRAINT FK_KARTICA_STAVKE_RACUNA_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE KARTICA_STAVKE_RACUNA ADD CONSTRAINT FK_KARTICA_STAVKE_RACUNA_stavka_kljuc FOREIGN KEY (stavka_kljuc) REFERENCES STAVKE (KLJUC)
ALTER TABLE template_description ADD CONSTRAINT FK_template_description_TEMPLATE_oznaka FOREIGN KEY (TEMPLATE_oznaka) REFERENCES TEMPLATE (oznaka)
ALTER TABLE KALKULACIJA_STAVKA_KARTICA ADD CONSTRAINT FK_KALKULACIJA_STAVKA_KARTICA_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE artikal_normativi ADD CONSTRAINT FK_artikal_normativi_ARTIKAL_KLJUC FOREIGN KEY (ARTIKAL_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE artikal_normativi ADD CONSTRAINT FK_artikal_normativi_NORMATIV_KLJUC FOREIGN KEY (NORMATIV_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE roba ADD CONSTRAINT FK_roba_pdv_nabava FOREIGN KEY (pdv_nabava) REFERENCES porezna_stopa (kljuc)
ALTER TABLE roba ADD CONSTRAINT FK_roba_pot FOREIGN KEY (pot) REFERENCES porezna_stopa (kljuc)
ALTER TABLE roba ADD CONSTRAINT FK_roba_pdv FOREIGN KEY (pdv) REFERENCES porezna_stopa (kljuc)
ALTER TABLE roba ADD CONSTRAINT FK_roba_grupa FOREIGN KEY (grupa) REFERENCES grupe_artikala (kljuc)
ALTER TABLE stavke_normativi ADD CONSTRAINT FK_stavke_normativi_STAVKA_KLJUC FOREIGN KEY (STAVKA_KLJUC) REFERENCES STAVKE (KLJUC)
ALTER TABLE stavke_normativi ADD CONSTRAINT FK_stavke_normativi_ARTIKAL_KLJUC FOREIGN KEY (ARTIKAL_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE racun_porezne_stavke ADD CONSTRAINT FK_racun_porezne_stavke_racun FOREIGN KEY (racun) REFERENCES RACUN (KLJUC)
ALTER TABLE roba_kartica ADD CONSTRAINT FK_roba_kartica_ROBA_KLJUC FOREIGN KEY (ROBA_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE roba_promjena_cijene ADD CONSTRAINT FK_roba_promjena_cijene_ARTIKAL_KLJUC FOREIGN KEY (ARTIKAL_KLJUC) REFERENCES roba (KLJUC)
ALTER TABLE RACUN ADD CONSTRAINT FK_RACUN_template FOREIGN KEY (template) REFERENCES TEMPLATE (oznaka)
ALTER TABLE RACUN ADD CONSTRAINT FK_RACUN_operater FOREIGN KEY (operater) REFERENCES OPERATER (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
